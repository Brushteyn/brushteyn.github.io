(window.webpackJsonp=window.webpackJsonp||[]).push([[49,29,47,62],{274:function(t,e,r){"use strict";e.a=param=>{var t={};return param&&(Array.isArray(param)?param.forEach((e=>{t["_".concat(e)]=!0})):t["_".concat(param)]=!0),t}},281:function(t,e,r){"use strict";e.a=(t,e)=>e[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]]},295:function(t,e,r){"use strict";r.r(e);var n={name:"TRuble",props:{symbol:{default:"₽",type:String}}},l=(r(312),r(31)),component=Object(l.a)(n,(function(){var t=this;return(0,t._self._c)("span",{staticClass:"ruble"},[t._v(t._s(t.symbol))])}),[],!1,null,"11b3297e",null);e.default=component.exports},299:function(t,e,r){},312:function(t,e,r){"use strict";r(299)},318:function(t,e,r){},338:function(t,e,r){},355:function(t,e,r){"use strict";r(318)},378:function(t,e,r){"use strict";r.r(e);r(32),r(15),r(21),r(37);var n=r(274),l=r(295),c=r(281),m={name:"TRangeSlider",components:{TRuble:l.default},props:{mod:{type:[Array,String],default:""},range:{type:Array,default:()=>[0,100]},step:{type:[Number,String],default:1},type:{type:String,default:"price"},formatType:{type:String,default:"money"},value:{type:Number,default:0},data:{type:Object,default:()=>{}},percent:{type:[Number,String],default:0}},data:()=>({val:50,currentValueNumber:null,currentValueFormatted:"",showRuble:!0}),computed:{modClass(){return Object(n.a)(this.mod)},classList(){return Object.assign({},this.modClass)},sliderOpts(){return{min:this.range[0],max:this.range[1],interval:this.step,tooltip:"none",dotSize:12,height:"5px"}},unit(){return"money"===this.formatType?"":"year"===this.formatType?Object(c.a)(this.currentValueNumber,["год","года","лет"]):"month"===this.formatType?Object(c.a)(this.currentValueNumber,["месяц","месяца","месяцев"]):""}},watch:{value(t){this.currentValueNumber=t},currentValueNumber(t){this.currentValueFormatted=this.formatMoney(t),this.formattedValueAddUnit(),this.changeSlider()}},created(){this.currentValueNumber=this.value,this.currentValueFormatted=this.formatMoney(this.currentValueNumber)},mounted(){this.changeSlider()},methods:{changeSlider(){this.$emit("change",this.currentValueNumber)},setInputFocus(){this.$refs.inputField.focus()},inputFocus(t){this.showRuble=!1;var e=t.currentTarget.value.replace(/[^\d .-]|(-)/g,"");this.currentValueFormatted=this.formatMoney(e)},inputBlur(t){this.showRuble=!0;var e=t.currentTarget.value,r=Number(e.replace(/\s/g,""));this.currentValueNumber=Math.round(this.checkValue(r)/this.step)*this.step,this.formattedValueAddUnit()},inputSubmit(t){t.currentTarget.blur()},checkValue(t){return t>this.range[1]?this.range[1]:t<this.range[0]?this.range[0]:t},formatMoney(t){if(!t)return t;var e=null;return e=Number("number"==typeof t?t.toString().replace(/[^\d.-]|(-)/g,""):t.replace(/[^\d.-]|(-)/g,"")),new Intl.NumberFormat("en-US",{style:"decimal",useGrouping:!0,maximumSignificantDigits:11}).format(e).replace(/,/g," ")},formattedValueAddUnit(){this.currentValueFormatted="".concat(this.currentValueFormatted," ").concat(this.unit)}}},d=(r(355),r(31)),component=Object(d.a)(m,(function(){var t=this,e=t._self._c;return e("client-only",[e("div",{ref:"rangeSliderContainer",staticClass:"range-slider",class:t.classList},[e("div",{staticClass:"range-slider__data",on:{click:t.setInputFocus}},[e("input",{ref:"inputField",staticClass:"range-slider__time _start",attrs:{type:"text",inputmode:"numeric"},domProps:{value:t.currentValueFormatted},on:{blur:t.inputBlur,focus:t.inputFocus,keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.inputSubmit.apply(null,arguments)}}}),t._v(" "),"money"===t.formatType&&t.showRuble?e("t-ruble",{staticClass:"range-slider__input-rouble"}):t._e()],1),t._v(" "),e("vue-slider",t._b({on:{change:t.changeSlider},model:{value:t.currentValueNumber,callback:function(e){t.currentValueNumber=e},expression:"currentValueNumber"}},"vue-slider",t.sliderOpts,!1))],1)])}),[],!1,null,"2ac8cdd6",null);e.default=component.exports},423:function(t,e,r){"use strict";r(338)},443:function(t,e,r){"use strict";r.r(e);r(32);var n=r(391),l=r(378),c=r(295),m=r(274),d={name:"TFilterMortgage",components:{TRangeSlider:l.default,TRuble:c.default},props:{mod:{type:[Array,String],default:""},type:{type:String,default:"mortgage"},data:{type:Object,default:()=>{}},reset:{type:Boolean,default:!1},installmentPay:{type:Number,default:0}},data(){return{firstPaymentData:{ranges:[],step:this.data.price_step,formatType:"money"},filterParams:{payment:null,paymentPercent:null,price:null,time:null},filterParamsInit:{payment:null,paymentPercent:null,price:null,time:null}}},computed:{modClass(){return Object(m.a)(this.mod)},classList(){return Object.assign({},this.modClass)}},watch:{filterParams:{handler(t){this.sendData()},deep:!0},reset(t){t&&this.setDefaultParams()}},created(){this.setInitParams();var t=this.$route.query;if(Object(n.isEmpty)(t))this.setDefaultParams();else for(var param in t)if(Object.prototype.hasOwnProperty.call(this.filterParams,param)){var e=Array.isArray(t[param]);t[param]=e?t[param].map((t=>isNaN(Number(t))?t:Number(t))):isNaN(Number(t[param]))?t[param]:Number(t[param]),this.filterParams[param]=t[param],this.filterParams.payment=Math.ceil(this.filterParams.price/100*this.data.initial_pay_percent/this.data.price_step)*this.data.price_step}},methods:{changedPriceSlider(t){this.filterParams.price=t;var e=Math.floor(t/100*this.data.percents[0]/this.data.price_step)*this.data.price_step,r=Math.ceil(t/100*this.data.percents[1]/this.data.price_step)*this.data.price_step;this.firstPaymentData.ranges=[e,r],this.filterParams.payment=this.checkPayment(t,this.filterParams.payment),this.filterParams.paymentPercent=100*this.filterParams.payment/t},changedPaymentSlider(t){this.filterParams.payment=t,this.filterParams.paymentPercent=100*t/this.filterParams.price},checkPayment(t,e){var r=Math.floor(t/100*this.data.percents[0]/this.data.price_step)*this.data.price_step,n=Math.ceil(t/100*this.data.percents[1]/this.data.price_step)*this.data.price_step;return e<r?r:e>n?n:e},changedYearSlider(t){this.filterParams.time=t},sendData(){var t=null;if("mortgage"===this.type){var{price:e,payment:r,paymentPercent:n,time:time}=this.filterParams;t={price:e,payment:r,creditSum:e-r,paymentPercent:n,time:time}}else{var{price:l,payment:c,time:m}=this.filterParams;t={price:l,payment:c,creditSum:l-c,time:m}}this.$emit("changeParams",t)},setInitParams(){var t=Math.floor(this.data.initial_price/100*this.data.percents[0]/this.data.price_step)*this.data.price_step,e=Math.ceil(this.data.initial_price/100*this.data.percents[1]/this.data.price_step)*this.data.price_step;this.firstPaymentData.ranges=[t,e],this.filterParamsInit.payment=Math.ceil(this.data.initial_price/100*this.data.initial_pay_percent/this.data.price_step)*this.data.price_step,this.filterParamsInit.price=this.data.initial_price,"mortgage"===this.type?this.filterParamsInit.time=this.data.initial_year_value:this.filterParamsInit.time=this.data.initial_month_value},setDefaultParams(){this.filterParams.payment=this.filterParamsInit.payment,this.filterParams.price=this.filterParamsInit.price,this.filterParams.time=this.filterParamsInit.time}}},h=(r(423),r(31)),component=Object(h.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter-mortgage",class:t.classList},[e("div",{staticClass:"filter-mortgage__row"},[t._m(0),t._v(" "),e("div",{staticClass:"filter-mortgage__item"},[e("div",{staticClass:"filter-mortgage__label"},[t._v("Стоимость квартиры")]),t._v(" "),e("t-range-slider",{attrs:{range:t.data.prices,value:t.filterParams.price,step:t.data.price_step,"format-type":"money",mod:"white",type:"price"},on:{change:t.changedPriceSlider}})],1),t._v(" "),e("div",{staticClass:"filter-mortgage__item"},[e("div",{staticClass:"filter-mortgage__label"},[t._v("Первоначальный взнос")]),t._v(" "),e("t-range-slider",{attrs:{range:t.firstPaymentData.ranges,value:t.filterParams.payment,step:t.data.price_step,"format-type":"money",mod:"white",type:"firstPayment",percent:t.filterParams.paymentPercent},on:{change:t.changedPaymentSlider}})],1),t._v(" "),e("div",{staticClass:"filter-mortgage__item"},[e("div",{staticClass:"filter-mortgage__label"},[t._v("Срок кредитования")]),t._v(" "),"mortgage"===t.type?[e("t-range-slider",{attrs:{range:t.data.years,value:t.filterParams.time,step:t.data.year_step,"format-type":"year",mod:"white",type:"time"},on:{change:t.changedYearSlider}})]:[e("t-range-slider",{attrs:{range:t.data.months,value:t.filterParams.time,step:t.data.month_step,"format-type":"month",mod:"white",type:"time"},on:{change:t.changedYearSlider}})]],2),t._v(" "),"installment"===t.type?e("div",{staticClass:"filter-mortgage__item orange"},[e("div",{staticClass:"filter-mortgage__label"},[t._v("Ежемесячный взнос")]),t._v(" "),e("div",{staticClass:"filter-mortgage__payment"},[t._v("\n        "+t._s(t.installmentPay.toLocaleString("ru-RU"))+" "),e("t-ruble"),t._v(" "),e("small",{staticClass:"filter-mortgage__special",class:{_show:t.filterParams.time>6}},[t._v("+1"),e("t-ruble",{attrs:{symbol:"%"}}),t._v(" на остаток ежемесячно, начиная с 7 месяца")],1)],1)]):t._e()])])}),[function(){var t=this._self._c;return t("div",{staticClass:"elf"},[t("img",{attrs:{src:"/svg/purchase_elf.svg",alt:""}})])}],!1,null,"05000d6c",null);e.default=component.exports}}]);